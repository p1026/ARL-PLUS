{"remainingRequest":"D:\\DawnLauncher\\PKEY\\Project\\Vue\\rontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DawnLauncher\\PKEY\\Project\\Vue\\rontend\\src\\views\\table\\addrule-info.vue?vue&type=style&index=0&id=30904bce&lang=css","dependencies":[{"path":"D:\\DawnLauncher\\PKEY\\Project\\Vue\\rontend\\src\\views\\table\\addrule-info.vue","mtime":1759135052000},{"path":"D:\\DawnLauncher\\PKEY\\Project\\Vue\\rontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1759192382851},{"path":"D:\\DawnLauncher\\PKEY\\Project\\Vue\\rontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1759192391907},{"path":"D:\\DawnLauncher\\PKEY\\Project\\Vue\\rontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1759192384629},{"path":"D:\\DawnLauncher\\PKEY\\Project\\Vue\\rontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1759192384647},{"path":"D:\\DawnLauncher\\PKEY\\Project\\Vue\\rontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1759192386775}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY2hlY2tib3gtaXRlbXMtY29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogd3JhcDsKfQoKLmNoZWNrYm94LWl0ZW0gewogIGZsZXgtYmFzaXM6IDMzLjMzJTsKICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9Cg=="},{"version":3,"sources":["addrule-info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"addrule-info.vue","sourceRoot":"src/views/table","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <h3>策略信息</h3>\n    <el-form\n      ref=\"dataForm\"\n      :rules=\"rules\"\n      :model=\"temp\"\n      label-position=\"left\"\n      label-width=\"70px\"\n      style=\"width: 400px; margin-left:50px;\"\n    >\n      <el-form-item label=\"名称\" required>\n        <el-input v-model=\"temp.name\" />\n      </el-form-item>\n      <el-form-item label=\"描述\">\n        <el-input v-model=\"temp.desc\" />\n      </el-form-item>\n    </el-form>\n\n    <template>\n      <table>\n        <h3>资产扫描配置</h3>\n        <span>域名爆破类型: </span>\n        <el-select v-model=\"temp.domain_brute_type\" class=\"filter-item\">\n          <el-option v-for=\"item in statusOptions\" :key=\"item\" :label=\"item\" :value=\"item\" />\n        </el-select>\n        <span>            端口扫描类型: </span>\n        <el-select v-model=\"temp.port_scan_type\" class=\"filter-item\">\n          <el-option v-for=\"item in levelptOptions\" :key=\"item\" :label=\"item\" :value=\"item\" />\n        </el-select>\n        <br><br>\n        <span>            主机超时时类型: </span>\n        <el-select v-model=\"temp.host_timeout_type\" class=\"filter-item\">\n          <el-option v-for=\"item in hosttimeoutOptions\" :key=\"item.key\" :label=\"item.label\" :value=\"item.key\" />\n        </el-select>\n        <br><br>\n        <div v-if=\"temp.host_timeout_type === 'custom'\">\n          <span>            主机超时时间: </span>\n          <el-input-number v-model=\"temp.host_timeout\" :min=\"0\" :max=\"1000\" style=\"width: 500px\" />\n        </div>\n        <br>\n        <span>            探测报文并行: </span>\n        <el-input-number v-model=\"temp.port_parallelism\" :min=\"1\" :max=\"1000\" style=\"width: 500px\" />\n        <br><br>\n        <span>            最少发包速率: </span>\n        <el-input-number v-model=\"temp.port_min_rate\" :min=\"1\" :max=\"1000\" style=\"width: 500px\" />\n        <br><br>\n        <el-row :gutter=\"32\">\n          <el-col :span=\"24\">\n            <el-button size=\"mini\" @click=\"selectAll\">全选</el-button>\n            <el-button size=\"mini\" @click=\"deselectAll\">取消</el-button>\n            <br>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"domain_brute\" :true-label=\"true\" :false-label=\"false\">域名爆破</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"domain_oneforall\" :true-label=\"true\" :false-label=\"false\">oneforall调用</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"alt_dns\" :true-label=\"true\" :false-label=\"false\">DNS字典智能生成</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"arl_search\" :true-label=\"true\" :false-label=\"false\">ARL 历史查询</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"dns_query_plugin\" :true-label=\"true\" :false-label=\"false\">域名查询插件</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"port_scan\" :true-label=\"true\" :false-label=\"false\">端口扫描</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"service_detection\" :true-label=\"true\" :false-label=\"false\">服务识别</el-checkbox>\n          </el-col>\n\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"os_detection\" :true-label=\"true\" :false-label=\"false\">操作系统识别</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"ssl_cert\" :true-label=\"true\" :false-label=\"false\">SSL 证书获取</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"skip_scan_cdn_ip\" :true-label=\"true\" :false-label=\"false\">跳过CDN</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"npoc_service_detection\" :true-label=\"true\" :false-label=\"false\">服务(python)识别\n            </el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"site_identify\" :true-label=\"true\" :false-label=\"false\">站点识别</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"search_engines\" :true-label=\"true\" :false-label=\"false\">搜索引擎调用</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"site_spider\" :true-label=\"true\" :false-label=\"false\">站点爬虫</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"site_capture\" :true-label=\"true\" :false-label=\"false\">站点截图</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"file_leak\" :true-label=\"true\" :false-label=\"false\">文件泄露</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"findvhost\" :true-label=\"true\" :false-label=\"false\">Host 碰撞</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"web_info_hunter\" :true-label=\"true\" :false-label=\"false\">wih调用</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"unauth_scan\" :true-label=\"true\" :false-label=\"false\">unauth调用</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"nuclei_scan\" :true-label=\"true\" :false-label=\"false\">nuclei 调用</el-checkbox>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-checkbox v-model=\"xray_scan\" :true-label=\"true\" :false-label=\"false\">xray 调用</el-checkbox>\n          </el-col>\n        </el-row>\n        <br><br>\n      </table>\n    </template>\n\n    <template>\n      <h3>弱口令爆破</h3>\n      <div class=\"checkbox-group\">\n        <el-checkbox v-model=\"checkAll\" :indeterminate=\"isIndeterminate\" @change=\"handleCheckAllChange\">全选\n        </el-checkbox>\n        <el-checkbox-group\n          v-model=\"checkedPlugins\"\n          class=\"checkbox-items-container\"\n          @change=\"handleCheckedCitiesChange\"\n        >\n          <div v-for=\"plugin in plugins\" :key=\"plugin.plugin_name\" class=\"checkbox-item\">\n            <el-checkbox :label=\"plugin.plugin_name\">{{ plugin.vul_name }}</el-checkbox>\n          </div>\n        </el-checkbox-group>\n      </div>\n    </template>\n\n    <template>\n      <h3>POC配置</h3>\n      <div class=\"checkbox-group\">\n        <el-checkbox v-model=\"poccheckAll\" :indeterminate=\"pocisIndeterminate\" @change=\"pochandleCheckAllChange\">全选\n        </el-checkbox>\n        <el-checkbox-group\n          v-model=\"poccheckedPlugins\"\n          class=\"checkbox-items-container\"\n          @change=\"pochandleCheckedCitiesChange\"\n        >\n          <div v-for=\"plugin in pocplugins\" :key=\"plugin.plugin_name\" class=\"checkbox-item\">\n            <el-checkbox :label=\"plugin.plugin_name\">{{ plugin.vul_name }}</el-checkbox>\n          </div>\n        </el-checkbox-group>\n      </div>\n    </template>\n\n    <template>\n      <h3>资产组配置</h3>\n      <el-select v-model=\"selectedId\">\n        <el-option\n          v-for=\"item in taskOptions\"\n          :key=\"item._id\"\n          :label=\"item.name + ' ('+ item.scope +')'\"\n          :value=\"item._id\"\n        />\n      </el-select>\n    </template>\n    <br>\n    <br><br>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogFormVisible = false\">\n        {{ $t('table.cancel') }}\n      </el-button>\n      <el-button type=\"primary\" @click=\"createData\">\n        {{ $t('table.confirm') }}\n      </el-button>\n    </div>\n  </div>\n</template>\n<style>\n.checkbox-items-container {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.checkbox-item {\n  flex-basis: 33.33%;\n  box-sizing: border-box;\n}\n</style>\n<script>\nimport {\n  fetchPv,\n  startArticle,\n  stopArticle,\n  deleteArticle,\n  batchdeleteArticle,\n  reStart,\n  Stop, pocList, groupList, policycreate\n} from '@/api/article'\nimport waves from '@/directive/waves' // waves directive\nimport { parseTime } from '@/utils'\nimport Pagination from '@/components/Pagination'\n\nconst calendarTypeOptions = [\n  { key: 'CN', display_name: 'China' },\n  { key: 'US', display_name: 'USA' },\n  { key: 'JP', display_name: 'Japan' },\n  { key: 'EU', display_name: 'Eurozone' }\n]\n\n// arr to obj, such as { CN : \"China\", US : \"USA\" }\nconst calendarTypeKeyValue = calendarTypeOptions.reduce((acc, cur) => {\n  acc[cur.key] = cur.display_name\n  return acc\n}, {})\n\nexport default {\n  name: 'ComplexTable',\n  // eslint-disable-next-line vue/no-unused-components\n  components: { Pagination },\n  directives: { waves },\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        done: 'success',\n        draft: 'info',\n        error: 'danger'\n      }\n      return statusMap[status]\n    },\n    typeFilter(type) {\n      return calendarTypeKeyValue[type]\n    }\n  },\n\n  data() {\n    return {\n      checkAll: false,\n      poccheckAll: false,\n      checkedPlugins: [],\n      poccheckedPlugins: [],\n      plugins: [], // 你会在此处加载你的实际插件数据\n      pocplugins: [],\n      isIndeterminate: true,\n      pocisIndeterminate: true,\n      burteData: [],\n      selectedId: '',\n      taskOptions: [],\n      pocData: [],\n      pocData1: [],\n      checkboxModels: {},\n      domain_brute: false,\n      domain_oneforall: false,\n      alt_dns: false,\n      dns_query_plugin: false,\n      arl_search: false,\n      port_scan: false,\n      service_detection: false,\n      os_detection: false,\n      ssl_cert: false,\n      skip_scan_cdn_ip: false,\n      npoc_service_detection: false,\n      site_identify: false,\n      search_engines: false,\n      site_spider: false,\n      site_capture: false,\n      file_leak: false,\n      findvhost: false,\n      unauth_scan: false,\n      web_info_hunter: false,\n      nuclei_scan: false,\n      xray_scan: false,\n      tableKey: 0,\n      list: null,\n      sels: '', // 当前选框选中的值\n      total: 0,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        size: 10\n      },\n      listQuery1: {},\n      listQuery2: {\n        size: 10000,\n        plugin_type: 'brute'\n      },\n      sortOptions: [{ label: '升序', key: 'target' }, { label: '降序', key: '-target' }],\n      statusOptions: ['test', 'big'],\n      srcptOptions: ['test', 'top100', 'top1000', 'all'],\n      levelptOptions: ['test', 'top100', 'top1000', 'all'],\n      hosttimeoutOptions: [{ label: '默认(900s)', key: 'default' }, { label: '自定义', key: 'custom' }],\n      showReviewer: false,\n      temp: {\n        host_timeout_type: 'default',\n        port_custom: '',\n        port_parallelism: 32,\n        port_min_rate: 60,\n        host_timeout: 0,\n        domain_brute_type: 'big',\n        port_scan_type: 'top100'\n      },\n      dialogFormVisible: false,\n      dialogStatus: '',\n      textMap: {\n        update: 'Edit',\n        create: 'Create'\n      },\n      dialogPvVisible: false,\n      pvData: [],\n      rules: {\n        type: [{ required: true, message: '类型不能为空', trigger: 'change' }],\n        domain: [{ required: true, message: '域名不能为空', trigger: 'change' }],\n        name: [{ required: true, message: '厂商不能为空', trigger: 'blur' }]\n      },\n      downloadLoading: false\n    }\n  },\n  created() {\n    this.pocgetList()\n    this.pocgetList1()\n    this.groupgetList()\n  },\n  methods: {\n    handleCheckAllChange(val) {\n      this.plugins.forEach(plugin => {\n        plugin.enable = val\n        if (val && !this.checkedPlugins.includes(plugin.plugin_name)) {\n          this.checkedPlugins.push(plugin.plugin_name)\n        }\n      })\n      if (!val) {\n        this.checkedPlugins = []\n      }\n      this.isIndeterminate = false\n    },\n    handleCheckedCitiesChange(value) {\n      const checkedCount = value.length\n      this.checkAll = checkedCount === this.plugins.length\n      this.isIndeterminate = checkedCount > 0 && checkedCount < this.plugins.length\n\n      // 更新plugins中每个插件的enable状态\n      this.plugins.forEach(plugin => {\n        plugin.enable = this.checkedPlugins.includes(plugin.plugin_name)\n      })\n    },\n    pochandleCheckAllChange(val) {\n      this.pocplugins.forEach(plugin => {\n        plugin.enable = val\n        if (val && !this.poccheckedPlugins.includes(plugin.plugin_name)) {\n          this.poccheckedPlugins.push(plugin.plugin_name)\n        }\n      })\n      if (!val) {\n        this.poccheckedPlugins = []\n      }\n      this.pocisIndeterminate = false\n    },\n    pochandleCheckedCitiesChange(value) {\n      const checkedCount = value.length\n      this.checkAll = checkedCount === this.pocplugins.length\n      this.pocisIndeterminate = checkedCount > 0 && checkedCount < this.pocplugins.length\n\n      // 更新plugins中每个插件的enable状态\n      this.pocplugins.forEach(plugin => {\n        plugin.enable = this.poccheckedPlugins.includes(plugin.plugin_name)\n      })\n    },\n    selectAll() {\n      // eslint-disable-next-line no-sequences\n      this.domain_brute = true,\n      this.domain_oneforall = true,\n      this.alt_dns = true,\n      this.dns_query_plugin = true,\n      this.arl_search = true,\n      this.port_scan = true,\n      this.service_detection = true,\n      this.os_detection = true,\n      this.ssl_cert = true,\n      this.skip_scan_cdn_ip = true,\n      this.npoc_service_detection = true,\n      this.site_identify = true,\n      this.search_engines = true,\n      this.site_spider = true,\n      this.site_capture = true,\n      this.file_leak = true,\n      this.findvhost = true,\n      this.unauth_scan = true,\n      this.web_info_hunter = true,\n      this.nuclei_scan = true,\n      this.xray_scan = true\n    },\n    deselectAll() {\n      // eslint-disable-next-line no-sequences\n      this.domain_brute = false,\n      this.domain_oneforall = false,\n      this.alt_dns = false,\n      this.dns_query_plugin = false,\n      this.arl_search = false,\n      this.port_scan = false,\n      this.service_detection = false,\n      this.os_detection = false,\n      this.ssl_cert = false,\n      this.skip_scan_cdn_ip = false,\n      this.npoc_service_detection = false,\n      this.site_identify = false,\n      this.search_engines = false,\n      this.site_spider = false,\n      this.site_capture = false,\n      this.file_leak = false,\n      this.findvhost = false,\n      this.unauth_scan = false,\n      this.web_info_hunter = false,\n      this.nuclei_scan = false\n      this.xray_scan = false\n    },\n    groupgetList() {\n      this.listLoading = true\n      this.listQuery.size = 100\n      groupList(this.listQuery).then(response => {\n        this.list = response.items\n        this.total = response.total\n        this.taskOptions = response.items\n\n        // Just to simulate the time of the request\n        setTimeout(() => {\n          this.listLoading = false\n        }, 1 * 1000)\n      })\n    },\n    pocgetList() {\n      this.listLoading = true\n      pocList(this.listQuery2).then(response => {\n        this.pocData = response.items\n        this.total = response.total\n        response.items.forEach(plugin => {\n          this.plugins.push({\n            plugin_name: plugin.plugin_name,\n            vul_name: plugin.vul_name,\n            enable: false\n          })\n        }).catch(error => {\n          console.log(error)\n        })\n\n        // Just to simulate the time of the request\n        setTimeout(() => {\n          this.listLoading = false\n        }, 1 * 1000)\n      })\n    },\n    pocgetList1() {\n      this.listLoading = true\n      this.listQuery1.size = 10000\n      this.listQuery1.plugin_type = 'poc'\n      pocList(this.listQuery1).then(response => {\n        this.pocData1 = response.items\n        this.total = response.total\n        response.items.forEach(plugin => {\n          this.pocplugins.push({\n            plugin_name: plugin.plugin_name,\n            vul_name: plugin.vul_name,\n            enable: false\n          })\n        }).catch(error => {\n          console.log(error)\n        })\n\n        // Just to simulate the time of the request\n        setTimeout(() => {\n          this.listLoading = false\n        }, 1 * 1000)\n      })\n    },\n    indexMethod(index) {\n      return index + 1\n    },\n    handleFilter() {\n      this.getList()\n    },\n    handleModifyStatus_stop(row, status) {\n      stopArticle(row)\n      this.$message({\n        message: '操作成功',\n        type: 'success'\n      })\n      row.status = status\n    },\n    handleModifyStatus_start(row, status) {\n      startArticle(row)\n      this.$message({\n        message: '操作成功',\n        type: 'success'\n      })\n      row.status = status\n    },\n    sortChange(data) {\n      const { prop, order } = data\n      if (prop === 'id') {\n        this.sortByID(order)\n      }\n    },\n    sortByID(order) {\n      if (order === 'ascending') {\n        this.listQuery.sort = '+id'\n      } else {\n        this.listQuery.sort = '-id'\n      }\n      this.handleFilter()\n    },\n    handleCreate() {\n      this.dialogStatus = 'create'\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        this.$refs['dataForm'].clearValidate()\n      })\n    },\n    createData() {\n      if (!this.temp.name) {\n        this.$message({\n          message: '名称不能为空',\n          type: 'warning'\n        })\n        return\n      }\n      const enabledPlugins = this.plugins.filter(plugin => plugin.enable === true)\n      const pocenabledPlugins = this.pocplugins.filter(plugin => plugin.enable === true)\n      const result = {\n        name: this.temp.name,\n        desc: this.temp.desc,\n        policy: {\n          brute_config: enabledPlugins,\n          ip_config: {\n            host_timeout: this.temp.host_timeout,\n            host_timeout_type: this.temp.host_timeout_type,\n            os_detection: this.os_detection,\n            port_custom: this.temp.port_custom,\n            port_min_rate: this.temp.port_min_rate,\n            port_parallelism: this.temp.port_parallelism,\n            port_scan: this.port_scan,\n            port_scan_type: this.temp.port_scan_type,\n            service_detection: this.service_detection,\n            ssl_cert: this.ssl_cert\n          },\n          npoc_service_detection: this.npoc_service_detection,\n          poc_config: pocenabledPlugins,\n          file_leak: this.file_leak,\n          site_config: {\n            nuclei_scan: this.nuclei_scan,\n            unauth_scan: this.unauth_scan,\n            web_info_hunter: this.web_info_hunter,\n            xray_scan: this.xray_scan,\n            search_engines: this.search_engines,\n            site_capture: this.site_capture,\n            site_identify: this.site_identify,\n            site_spider: this.site_spider\n          },\n          scope_config: {\n            scope_id: this.selectedId ? this.selectedId : ''\n          }\n        }\n      }\n      policycreate(result).then(response => {\n        if (response.code === 200) {\n          this.dialogFormVisible = false\n          this.$notify({\n            title: '成功',\n            message: '创建成功',\n            type: 'success',\n            duration: 2000\n          })\n          this.$router.push('/rule/rule-info')\n        }\n      }).catch(error => {\n        // 处理请求异常\n        this.$notify({\n          title: '失败',\n          message: error.message,\n          type: 'error',\n          duration: 2000\n        })\n      })\n    },\n    handleUpdate(row) {\n      this.temp = Object.assign({}, row) // copy obj\n      this.dialogStatus = 'update'\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        this.$refs['dataForm'].clearValidate()\n      })\n    },\n    handleSelectionChange(sels) {\n      this.sels = sels\n    },\n    // 批量删除执行操作\n    batchDelect() {\n      // 删除前的提示\n      this.$confirm('确认删除记录吗?', '提示', {\n        type: 'warning'\n      }).then(() => {\n        const data = {\n          del_task_data: true,\n          task_id: this.sels.map((item) => item._id)\n        }\n        batchdeleteArticle(data)\n        this.$notify({\n          title: '成功',\n          message: '删除成功',\n          type: 'success',\n          duration: 2000\n        })\n        setTimeout(() => {\n          location.reload()\n        }, 1000)\n      })\n    },\n    handleDelete(row) {\n      this.$confirm('确认删除记录吗?', '提示', {\n        type: 'warning'\n      }).then(() => {\n        const data = {\n          del_task_data: true,\n          task_id: [row._id]\n        }\n        deleteArticle(data)\n        this.$notify({\n          title: '成功',\n          message: '删除成功',\n          type: 'success',\n          duration: 2000\n        })\n        setTimeout(() => {\n          location.reload()\n        }, 1000)\n      })\n    },\n    reStarts(row) {\n      const data = {\n        task_id: [row._id]\n      }\n      reStart(data)\n      this.$notify({\n        title: '成功',\n        message: '运行成功',\n        type: 'success',\n        duration: 2000\n      })\n      setTimeout(() => {\n        location.reload()\n      }, 1000)\n    },\n\n    taskStop(row) {\n      Stop(row._id)\n      this.$notify({\n        title: '成功',\n        message: '运行成功',\n        type: 'success',\n        duration: 2000\n      })\n      setTimeout(() => {\n        location.reload()\n      }, 1000)\n    },\n\n    handleFetchPv(pv) {\n      fetchPv(pv).then(response => {\n        this.pvData = response.data.pvData\n        this.dialogPvVisible = true\n      })\n    },\n    handleDownload() {\n      this.downloadLoading = true\n      import('@/vendor/Export2Excel').then(excel => {\n        const tHeader = ['任务', '目标', '状态', '开始时间', '结束时间']\n        const filterVal = ['name', 'target', 'status', 'start_time', 'end_time']\n        const data = this.formatJson(filterVal)\n        excel.export_json_to_excel({\n          header: tHeader,\n          data,\n          filename: '任务表'\n        })\n        this.downloadLoading = false\n      })\n    },\n    formatJson(filterVal) {\n      return this.list.map(v => filterVal.map(j => {\n        if (j === 'timestamp') {\n          return parseTime(v[j])\n        } else {\n          return v[j]\n        }\n      }))\n    },\n    getSortClass: function(key) {\n      const order = this.listQuery.order\n      return order === `+${key}` ? 'ascending' : 'descending'\n    }\n  }\n}\n</script>\n"]}]}